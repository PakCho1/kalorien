<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Kalorie Tracker</title>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;-webkit-font-smoothing:antialiased;overscroll-behavior:none}
.scrollbar-hide::-webkit-scrollbar{display:none}
.scrollbar-hide{-ms-overflow-style:none;scrollbar-width:none}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useRef,useEffect}=React;
const Plus=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>;
const Trash2=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>;
const Calendar=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>;
const Home=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>;
const Flame=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>;
const X=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>;
const ChevronRight=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>;
const Drumstick=({className})=><svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24"><path d="M15.45 15.4c-2.13.65-4.3.32-5.7-1.1-2.29-2.27-1.76-6.5 1.17-9.42 2.93-2.93 7.15-3.46 9.43-1.18 1.41 1.41 1.74 3.57 1.1 5.71-1.4-.51-3.26-.02-4.64 1.36-1.38 1.38-1.87 3.23-1.36 4.63z"/><path d="m11.25 15.6-2.16 2.16a2.5 2.5 0 1 1-4.56 1.73 2.49 2.49 0 0 1-1.41-4.24 2.5 2.5 0 0 1 3.14-.32l2.16-2.16"/></svg>;

function CalorieTracker(){
const[entries,setEntries]=useState(()=>{const saved=localStorage.getItem('calorieEntries');return saved?JSON.parse(saved):[]});
const[dailyGoal,setDailyGoal]=useState(()=>{const saved=localStorage.getItem('dailyGoal');return saved?parseInt(saved):2000});
const[proteinGoal,setProteinGoal]=useState(()=>{const saved=localStorage.getItem('proteinGoal');return saved?parseInt(saved):150});
const[foodName,setFoodName]=useState('');
const[calories,setCalories]=useState('');
const[protein,setProtein]=useState('');
const[currentView,setCurrentView]=useState('home');
const[selectedDate,setSelectedDate]=useState(null);
const[showAddModal,setShowAddModal]=useState(false);
const[visibleMonth,setVisibleMonth]=useState('');
const[scrollDays,setScrollDays]=useState([]);
const scrollContainerRef=useRef(null);
const isLoadingMore=useRef(false);
const today=new Date().toLocaleDateString('de-DE');
const viewDate=selectedDate||today;
const getDayName=(dateString)=>{const days=['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'];const parts=dateString.split('.');const date=new Date(parts[2],parts[1]-1,parts[0]);return days[date.getDay()]};
useEffect(()=>{localStorage.setItem('calorieEntries',JSON.stringify(entries))},[entries]);
useEffect(()=>{localStorage.setItem('dailyGoal',dailyGoal.toString())},[dailyGoal]);
useEffect(()=>{localStorage.setItem('proteinGoal',proteinGoal.toString())},[proteinGoal]);
useEffect(()=>{const initDays=[];const now=new Date();const startDate=new Date(now);startDate.setDate(now.getDate()-365);for(let i=0;i<=730;i++){const date=new Date(startDate);date.setDate(startDate.getDate()+i);initDays.push(date)}setScrollDays(initDays);setTimeout(()=>{if(scrollContainerRef.current){const buttonWidth=60;const todayIndex=365;const centerOffset=(scrollContainerRef.current.clientWidth/2)-(buttonWidth/2);scrollContainerRef.current.scrollLeft=(todayIndex*buttonWidth)-centerOffset}},100)},[]);
const todayEntries=entries.filter(entry=>entry.date===viewDate);
const totalCalories=todayEntries.reduce((sum,entry)=>sum+entry.calories,0);
const totalProtein=todayEntries.reduce((sum,entry)=>sum+entry.protein,0);
const progress=Math.min((totalCalories/dailyGoal)*100,100);
const proteinProgress=Math.min((totalProtein/proteinGoal)*100,100);
const addEntry=()=>{if(!foodName.trim()||!calories||calories===''||isNaN(parseFloat(calories)))return;const newEntry={id:Date.now(),foodName:foodName.trim(),calories:parseFloat(calories),protein:parseFloat(protein)||0,date:today,time:new Date().toLocaleTimeString('de-DE',{hour:'2-digit',minute:'2-digit'})};setEntries([newEntry,...entries]);setFoodName('');setCalories('');setProtein('');setShowAddModal(false)};
const deleteEntry=(id)=>{setEntries(entries.filter(entry=>entry.id!==id))};
const handleKeyPress=(e)=>{if(e.key==='Enter')addEntry()};
const getUniqueDates=()=>{const dates=[...new Set(entries.map(e=>e.date))];return dates.sort((a,b)=>{const dateA=a.split('.').reverse().join('-');const dateB=b.split('.').reverse().join('-');return new Date(dateB)-new Date(dateA)})};
const getDayStats=(date)=>{const dayEntries=entries.filter(e=>e.date===date);return dayEntries.reduce((sum,e)=>sum+e.calories,0)};
const getMonthName=(date)=>{const d=typeof date==='string'?new Date(date.split('.').reverse().join('-')):date;return d.toLocaleDateString('de-DE',{month:'long',year:'numeric'})};
const formatDay=(date)=>{const days=['So','Mo','Di','Mi','Do','Fr','Sa'];return days[date.getDay()]};
const formatDateForComparison=(date)=>date.toLocaleDateString('de-DE');
const handleScroll=()=>{if(!scrollContainerRef.current||scrollDays.length===0||isLoadingMore.current)return;const container=scrollContainerRef.current;const scrollLeft=container.scrollLeft;const buttonWidth=60;const scrollWidth=container.scrollWidth;const clientWidth=container.clientWidth;const centerPosition=scrollLeft+(clientWidth/2);const centerDayIndex=Math.floor(centerPosition/buttonWidth);if(centerDayIndex>=0&&centerDayIndex<scrollDays.length){const centerDate=scrollDays[centerDayIndex];const monthYear=getMonthName(centerDate);setVisibleMonth(monthYear)}if(scrollLeft>scrollWidth-clientWidth-2000){isLoadingMore.current=true;const lastDay=scrollDays[scrollDays.length-1];const newDays=[];for(let i=1;i<=180;i++){const date=new Date(lastDay);date.setDate(lastDay.getDate()+i);newDays.push(date)}setScrollDays(prev=>[...prev,...newDays]);setTimeout(()=>{isLoadingMore.current=false},100)}if(scrollLeft<2000){isLoadingMore.current=true;const firstDay=scrollDays[0];const newDays=[];for(let i=180;i>=1;i--){const date=new Date(firstDay);date.setDate(firstDay.getDate()-i);newDays.push(date)}setScrollDays(prev=>[...newDays,...prev]);setTimeout(()=>{if(scrollContainerRef.current){scrollContainerRef.current.scrollLeft=scrollLeft+(180*buttonWidth);isLoadingMore.current=false}},10)}};
const renderHome=()=>{const currentMonthYear=visibleMonth||getMonthName(new Date());const viewportWidth='calc(7 * 60px)';return(<div className="pb-32"><div className="mb-6"><h1 className="text-4xl font-black text-gray-900 mb-1">{getDayName(viewDate)}</h1><p className="text-sm text-gray-500">{viewDate}</p></div><div className="bg-white rounded-3xl p-4 mb-6"><div className="flex items-center justify-center mb-4 h-8"><div className="font-bold text-gray-900">{currentMonthYear}</div></div><div ref={scrollContainerRef} onScroll={handleScroll} className="overflow-x-scroll scrollbar-hide mx-auto" style={{scrollbarWidth:'none',msOverflowStyle:'none',WebkitOverflowScrolling:'touch',maxWidth:viewportWidth}}><div className="flex gap-2 h-[56px]">{scrollDays.map((date,index)=>{const dateStr=formatDateForComparison(date);const isSelected=dateStr===viewDate;const isToday=dateStr===today;return(<button key={index} onClick={()=>setSelectedDate(dateStr===today?null:dateStr)} className={`flex flex-col items-center justify-center rounded-2xl w-[52px] flex-shrink-0 transition-all h-full pt-1 ${isSelected?'bg-gradient-to-br from-orange-400 to-pink-500 text-white shadow-lg':'hover:bg-gray-50'}`}><span className={`text-xs font-medium ${isSelected?'text-white opacity-90':'text-gray-500'}`}>{formatDay(date)}</span><span className={`text-lg font-bold ${isSelected?'text-white':isToday?'text-orange-500':'text-gray-900'}`}>{date.getDate()}</span>{isToday&&!isSelected?<div className="w-1 h-1 bg-orange-500 rounded-full"/>:<div className="w-1 h-1"/>}</button>)})}</div></div></div><div className="grid grid-cols-2 gap-4 mb-6"><div className="bg-gradient-to-br from-orange-400 to-pink-500 rounded-3xl p-6 text-white relative overflow-hidden"><div className="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"/><div className="relative z-10"><div className="text-sm font-medium opacity-90 mb-2">Kalorien</div><div className="text-3xl font-black mb-1">{totalCalories}</div><div className="text-xs opacity-80">/ {dailyGoal} kcal</div><div className="mt-4 bg-white/20 rounded-full h-2 overflow-hidden"><div className="bg-white h-full rounded-full transition-all duration-1000" style={{width:`${progress}%`}}/></div></div></div><div className="bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl p-6 text-white relative overflow-hidden"><div className="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"/><div className="relative z-10"><div className="text-sm font-medium opacity-90 mb-2">Protein</div><div className="text-3xl font-black mb-1">{totalProtein}</div><div className="text-xs opacity-80">/ {proteinGoal}g</div><div className="mt-4 bg-white/20 rounded-full h-2 overflow-hidden"><div className="bg-white h-full rounded-full transition-all duration-1000" style={{width:`${proteinProgress}%`}}/></div></div></div></div><div className="bg-white rounded-3xl p-6 mb-6"><div className="flex items-center justify-between mb-4"><h2 className="text-lg font-bold text-gray-900">Mahlzeiten</h2><span className="text-sm text-gray-500">{todayEntries.length} Einträge</span></div>{todayEntries.length===0?<div className="text-center py-12"><div className="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3"><Plus className="w-8 h-8 text-gray-400"/></div><p className="text-gray-500 text-sm">Noch keine Einträge</p><p className="text-gray-400 text-xs mt-1">Tippe auf + zum Hinzufügen</p></div>:<div className="space-y-3">{todayEntries.map(entry=><div key={entry.id} className="flex items-center gap-4 p-4 bg-gray-50 rounded-2xl hover:bg-gray-100 transition-all group"><div className="w-12 h-12 bg-gradient-to-br from-orange-400 to-pink-500 rounded-2xl flex items-center justify-center flex-shrink-0"><span className="text-white font-bold text-sm">{entry.calories}</span></div><div className="flex-1 min-w-0"><div className="font-semibold text-gray-900 text-sm truncate">{entry.foodName}</div><div className="flex items-center gap-2 text-xs text-gray-500 mt-0.5"><span>{entry.protein}g Protein</span><span>•</span><span>{entry.time}</span></div></div><button onClick={()=>deleteEntry(entry.id)} className="opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all p-2"><Trash2 className="w-4 h-4"/></button></div>)}</div>}</div></div>)};
const renderHistory=()=>{const dates=getUniqueDates();return(<div className="pb-32"><div className="mb-6"><h1 className="text-4xl font-black text-gray-900">Verlauf</h1></div>{dates.length===0?<div className="text-center py-20 bg-white rounded-3xl"><Calendar className="w-16 h-16 text-gray-300 mx-auto mb-3"/><p className="text-gray-400 text-sm">Noch keine Einträge</p></div>:<div className="space-y-3">{dates.map(date=>{const dayTotal=getDayStats(date);const isToday=date===today;return(<button key={date} onClick={()=>{setSelectedDate(date);setCurrentView('stats')}} className="w-full flex items-center gap-4 bg-white rounded-3xl p-5 hover:shadow-md transition-all"><div className="w-14 h-14 bg-gradient-to-br from-orange-400 to-pink-500 rounded-2xl flex items-center justify-center flex-shrink-0"><div className="text-white text-center"><div className="text-lg font-bold">{date.split('.')[0]}</div><div className="text-xs opacity-80">{date.split('.')[1]}</div></div></div><div className="flex-1 text-left"><div className="font-bold text-gray-900">{isToday?'Heute':date}</div><div className="text-sm text-gray-500">{entries.filter(e=>e.date===date).length} Einträge</div></div><div className="text-right"><div className="font-bold text-gray-900 text-lg">{dayTotal}</div><div className="text-xs text-gray-500">kcal</div></div><ChevronRight className="w-5 h-5 text-gray-400"/></button>)})}</div>}</div>)};
const renderStats=()=>{const isToday=viewDate===today;return(<div className="pb-32"><div className="flex items-center justify-between mb-6"><button onClick={()=>{setSelectedDate(null);setCurrentView('history')}} className="text-sm text-gray-600 hover:text-gray-900 font-semibold">← Zurück</button><div className="text-sm font-bold text-gray-900">{isToday?'Heute':viewDate}</div><div className="w-20"/></div><div className="grid grid-cols-2 gap-4 mb-6"><div className="bg-gradient-to-br from-orange-400 to-pink-500 rounded-3xl p-6 text-white"><div className="text-sm font-medium opacity-90 mb-2">Kalorien</div><div className="text-3xl font-black">{totalCalories}</div><div className="text-xs opacity-80">/ {dailyGoal} kcal</div></div><div className="bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl p-6 text-white"><div className="text-sm font-medium opacity-90 mb-2">Protein</div><div className="text-3xl font-black">{totalProtein}</div><div className="text-xs opacity-80">/ {proteinGoal}g</div></div></div><div className="bg-white rounded-3xl p-6"><h2 className="text-lg font-bold text-gray-900 mb-4">Einträge</h2>{todayEntries.length===0?<div className="text-center py-12 text-gray-400 text-sm">Keine Einträge</div>:<div className="space-y-3">{todayEntries.map(entry=><div key={entry.id} className="flex items-center gap-4 p-4 bg-gray-50 rounded-2xl"><div className="w-12 h-12 bg-gradient-to-br from-orange-400 to-pink-500 rounded-2xl flex items-center justify-center flex-shrink-0"><span className="text-white font-bold text-sm">{entry.calories}</span></div><div className="flex-1"><div className="font-semibold text-gray-900 text-sm">{entry.foodName}</div><div className="flex items-center gap-2 text-xs text-gray-500 mt-0.5"><span>{entry.protein}g Protein</span></div></div></div>)}</div>}</div></div>)};
const renderGoal=()=>(<div className="pb-32"><div className="mb-6"><h1 className="text-4xl font-black text-gray-900 mb-1">Ziele</h1><p className="text-sm text-gray-500">Setze deine täglichen Ziele</p></div><div className="space-y-4"><div className="bg-white rounded-3xl p-6"><div className="flex items-center gap-3 mb-4"><div className="w-12 h-12 bg-gradient-to-br from-orange-400 to-pink-500 rounded-2xl flex items-center justify-center"><Flame className="w-6 h-6 text-white"/></div><div><div className="font-bold text-gray-900">Kalorien</div><div className="text-xs text-gray-500">Tägliches Ziel</div></div></div><input type="text" inputMode="numeric" pattern="[0-9]*" value={dailyGoal} onChange={e=>{const val=e.target.value.replace(/[^0-9]/g,'');setDailyGoal(parseInt(val)||0)}} className="w-full px-6 py-4 bg-gray-50 rounded-2xl border-0 focus:outline-none focus:ring-2 focus:ring-orange-400 text-center text-2xl font-bold text-gray-900"/></div><div className="bg-white rounded-3xl p-6"><div className="flex items-center gap-3 mb-4"><div className="w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-2xl flex items-center justify-center"><Drumstick className="w-6 h-6 text-white"/></div><div><div className="font-bold text-gray-900">Protein</div><div className="text-xs text-gray-500">Tägliches Ziel in Gramm</div></div></div><input type="text" inputMode="numeric" pattern="[0-9]*" value={proteinGoal} onChange={e=>{const val=e.target.value.replace(/[^0-9]/g,'');setProteinGoal(parseInt(val)||0)}} className="w-full px-6 py-4 bg-gray-50 rounded-2xl border-0 focus:outline-none focus:ring-2 focus:ring-blue-400 text-center text-2xl font-bold text-gray-900"/></div></div></div>);
return(<div className="min-h-screen bg-gray-50"><div className="max-w-md mx-auto px-5 pt-12 pb-8">{currentView==='home'&&renderHome()}{currentView==='history'&&renderHistory()}{currentView==='stats'&&renderStats()}{currentView==='goal'&&renderGoal()}{showAddModal&&<div className="fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-end" onClick={()=>setShowAddModal(false)}><div className="w-full max-w-md mx-auto bg-white overflow-hidden" style={{borderTopLeftRadius:'40px',borderTopRightRadius:'40px'}} onClick={e=>e.stopPropagation()}><div className="p-8 pb-10"><div className="flex items-center justify-between mb-6"><h2 className="text-xl font-black text-gray-900">Neuer Eintrag</h2><button onClick={()=>setShowAddModal(false)} className="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-all"><X className="w-5 h-5 text-gray-600"/></button></div><div className="space-y-4"><input type="text" value={foodName} onChange={e=>setFoodName(e.target.value)} onKeyPress={handleKeyPress} placeholder="Lebensmittel" className="w-full px-6 py-4 bg-gray-50 rounded-2xl border-0 focus:outline-none focus:ring-2 focus:ring-gray-900 font-medium" style={{fontSize:'16px'}}/><div className="grid grid-cols-2 gap-3"><input type="text" inputMode="numeric" pattern="[0-9]*" value={calories} onChange={e=>{const val=e.target.value.replace(/[^0-9]/g,'');setCalories(val)}} onKeyPress={handleKeyPress} placeholder="Kalorien" className="px-6 py-4 bg-gray-50 rounded-2xl border-0 focus:outline-none focus:ring-2 focus:ring-gray-900 font-medium" style={{fontSize:'16px'}}/><input type="text" inputMode="numeric" pattern="[0-9]*" value={protein} onChange={e=>{const val=e.target.value.replace(/[^0-9]/g,'');setProtein(val)}} onKeyPress={handleKeyPress} placeholder="Protein (g)" className="px-6 py-4 bg-gray-50 rounded-2xl border-0 focus:outline-none focus:ring-2 focus:ring-gray-900 font-medium" style={{fontSize:'16px'}}/></div><button onClick={addEntry} className="w-full bg-gradient-to-r from-orange-400 to-pink-500 text-white py-4 rounded-3xl font-bold text-sm hover:shadow-lg transition-all">Hinzufügen</button></div></div></div></div>}<div className="fixed bottom-6 left-0 right-0 z-30"><div className="max-w-md mx-auto px-5"><div className="bg-gray-900 rounded-full p-2 flex items-center justify-center gap-6 max-w-xs mx-auto"><button onClick={()=>{setSelectedDate(null);setCurrentView('home')}} className={`flex flex-col items-center py-3 px-4 rounded-full transition-all w-14 ${currentView==='home'?'bg-white':''}`}><Home className={`w-5 h-5 ${currentView==='home'?'text-gray-900':'text-white'}`}/></button><button onClick={()=>setShowAddModal(true)} className="w-12 h-12 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full flex items-center justify-center shadow-lg flex-shrink-0"><Plus className="w-6 h-6 text-white"/></button><button onClick={()=>setCurrentView('history')} className={`flex flex-col items-center py-3 px-4 rounded-full transition-all w-14 ${currentView==='history'||currentView==='stats'?'bg-white':''}`}><Calendar className={`w-5 h-5 ${currentView==='history'||currentView==='stats'?'text-gray-900':'text-white'}`}/></button><button onClick={()=>setCurrentView('goal')} className={`flex flex-col items-center py-3 px-4 rounded-full transition-all w-14 ${currentView==='goal'?'bg-white':''}`}><Flame className={`w-5 h-5 ${currentView==='goal'?'text-gray-900':'text-white'}`}/></button></div></div></div></div></div>)}
ReactDOM.createRoot(document.getElementById('root')).render(<CalorieTracker/>);
</script>
</body>
</html>
